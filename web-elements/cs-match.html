<!doctype html>
<html>
	<template>
	<style>
	div.container
	{
		display: block;
		margin: 20px;
		background-color: #161616;
	}
	
	span.teamname
	{
		texsize: 2.7rem;
		color: #FFFFFF;
		font-weight: bold;
	}
	
	img
	{
		vertical-align: middle;
		width: 30px;
		padding: 0px 10px 0px 10px;
	}
	
	#result
	{
		font-size: 2.8rem;
		font-weight: bold;
	}
	</style>
	<div class="container">
		<span class="teamname">{{team1}}</span>
		<img src="{{icon1}}"/>
		<span id="result">{{result}}</span>
		<img src="{{icon2}}"/>
		<span class="teamname">{{team2}}</span>
	</div>
	</template>
	<script>
		var CsMatch = Object.create(HTMLElement.prototype);
		var CsMatchTemplate = document.currentScript.ownerDocument.getElementsByTagName("TEMPLATE")[0].innerHTML;
		
		var getTeamData = function(shortname) {
			var request = new XMLHttpRequest();
			request.open("GET", window.location.href + "imgs/teams/" + shortname + ".cfg", true);
			request.send(null);
			console.log("Loaded team data: " + request.responseText);
			return {
				"fullname" : request.responseText,
				"logo" : "./imgs/teams/" + shortname + ".png"
			};
		};
		
		CsMatch.createdCallback = function() {
			var shadow = this.createShadowRoot();
			var team1 = getTeamData(this.getAttribute("team1"));
			var team2 = getTeamData(this.getAttribute("team2"));
			CsMatchTemplate = CsMatchTemplate.replace("{{team1}}", team1["fullname"]);
			CsMatchTemplate = CsMatchTemplate.replace("{{icon1}}", team1["logo"]);
			CsMatchTemplate = CsMatchTemplate.replace("{{team2}}", team2["fullname"]);
			CsMatchTemplate = CsMatchTemplate.replace("{{icon2}}", team2["logo"]);
			CsMatchTemplate = CsMatchTemplate.replace("{{result}}", this.innerText);
			shadow.innerHTML = CsMatchTemplate;
		};
		
		document.registerElement("cs-match", { prototype : CsMatch });
	</script>
</html>
